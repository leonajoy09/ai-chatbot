# Azure Infrastructure Security


## Platform approved Azure Services

We implemented an Service Enablement Framework for  the Landing Zones in order to ensure Cloud Services can be used in secure manner [Service Enablement](../../cloud/azure/sef/introduction.md). Please watch the section's Status in the header

## Azure Policies

Organizational standards are enforced using [Azure policy](https://learn.microsoft.com/en-us/azure/governance/policy/overview). The current set of policies are defined in the table below:

| Name                                                                                                                                                                                                                                                                                                         | Type              | Description                                                                                                                                                                                                                                                                            |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [Enable Microsoft Defender for Cloud on your subscription](https://portal.azure.com/#view/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2Fproviders%2FMicrosoft.Authorization%2FpolicyDefinitions%2Fac076320-ddcf-4066-b451-6154267e8ad2)                                                           | DeployIfNotExists | Enables [Microsoft Defender for Cloud](https://learn.microsoft.com/da-dk/azure/defender-for-cloud/) on subscriptions.                                                                                                                                                                  |
| [Configure Azure Defender for servers to be enabled](https://portal.azure.com/#view/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2Fproviders%2FMicrosoft.Authorization%2FpolicyDefinitions%2F8e86a5b6-b9bd-49d1-8e21-4bb8a0862222)                                                                 | DeployIfNotExists | Enables [Defender for servers](https://learn.microsoft.com/en-us/azure/defender-for-cloud/defender-for-servers-introduction) on subscriptions.                                                                                                                                         |
| [[Preview]: Deploy Microsoft Defender for Endpoint agent on Windows virtual machines](https://portal.azure.com/#view/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2Fproviders%2FMicrosoft.Authorization%2FpolicyDefinitions%2F1ec9c2c2-6d64-656d-6465-3ec3309b8579)                                | DeployIfNotExists | Deploys [Microsoft Defender for Endpoint](https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/microsoft-defender-endpoint) on applicable Windows VM images.                                                                                                     |
| [[Preview]: Deploy Microsoft Defender for Endpoint agent on Linux virtual machines](https://portal.azure.com/#view/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2Fproviders%2FMicrosoft.Authorization%2FpolicyDefinitions%2Fd30025d0-6d64-656d-6465-67688881b632)                                  | DeployIfNotExists | Deploys [Microsoft Defender for Endpoint](https://learn.microsoft.com/en-us/microsoft-365/security/defender-endpoint/microsoft-defender-endpoint) agent on applicable Linux VM images.                                                                                                 |
| [Configure machines to receive a vulnerability assessment provider](https://portal.azure.com/#view/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2Fproviders%2FMicrosoft.Authorization%2FpolicyDefinitions%2F13ce0167-8ca6-4048-8e6b-f996402e3c1b)                                                  | DeployIfNotExists | Deploys [Microsoft Defender for Endpoint's threat and vulnerability management](https://learn.microsoft.com/en-us/microsoft-365/security/defender-vulnerability-management/defender-vulnerability-management?view=o365-worldwide) on virtual machines.                                 |
| [Enable Security Center's auto provisioning of the Log Analytics agent on your subscriptions with custom workspace.](https://portal.azure.com/#view/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2Fproviders%2FMicrosoft.Authorization%2FpolicyDefinitions%2F8e7da0a5-0a0e-4bbc-bfc0-7773c018b616) | DeployIfNotExists | [Auto provisions](https://learn.microsoft.com/en-us/azure/defender-for-cloud/working-with-log-analytics-agent) the [Log Analytics agent](https://learn.microsoft.com/en-us/azure/azure-monitor/agents/log-analytics-agent) on subscriptions. The logs are sent to a central workspace. |
| [[Preview]: Storage account public access should be disallowed](https://portal.azure.com/#view/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2Fproviders%2FMicrosoft.Authorization%2FpolicyDefinitions%2F4fa4b6c0-31ca-4c0d-b10d-24b96f62a751)                                                      | Audit (soon Deny) | Prevents storage accounts from enabling [anonymous public read access for containers and blobs](https://learn.microsoft.com/en-us/azure/storage/blobs/anonymous-read-access-configure).                                                                                                |

### Policy Exemptions

As the overarching principle, all teams deploying workloads and infrastrucutre to Azure, are expected to design their services in a way which complies with the Azure Policies. However, there might be specific use cases where a resource will need to be exempted from a policy.

In such cases a policy exemption can be issued on a subscription or resource group level. If you have a valid use case which requires a policy exemption, please raise the request to **Henkel Cloud Security Team** and the request will undergo a review.
Policy exemptions are granted with an expiration date as the default case but can also be granted permanently if the case is assessed so.

#### Current policy exemptions

| Policy                                                        | Scope                                                                                                | Category | Expiration Date |
| ------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------- | -------- | --------------- |
| [Preview]: Storage account public access should be disallowed | hen-Adhesives-PBISolution/2047399e-5e3d-49dc-bc18-26e4b7ace7c9/hatinnoaas001                         | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-CcoE-dbp-dev/euw-dev-community-rg-01/euwdevcommunitysta                                          | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-CcoE-dbp-dev/euw-test-community-rg-01/euwtestcommunitysta                                        | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-CcoE-dbp-prod/euw-prod-community-rg-01/euwprodcommunitysta                                       | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-ConsultingBI-Foundation-Prod/3487b864-4bad-4481-8a9e-f89d59b9e32d/bistredwintp01                 | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-ConsultingBI-Foundation-Prod/f9b61b5e-89a3-4812-9d57-7d534cee1b6f/bistredwintq04                 | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-dxTSoftwareDigiTech-Ipaas-Dev/weu-dev-ipaas-ciam-rg/weudevipaasciampublicbs                      | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-dxTSoftwareDigiTech-Ipaas-Dev/weu-dev-ipaas-ciam-rg/weudevipaasciamsa                            | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-dxTSoftwareDigiTech-Ipaas-Dev/weu-test-ipaas-ciam-rg/weutestipaasciampublicbs                    | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-dxTSoftwareDigiTech-Ipaas-Dev/weu-test-ipaas-ciam-rg/weutestipaasciamsa                          | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-dxTSoftwareDigiTech-Ipaas-Prod/weu-prod-ipaas-ciam-rg/weuprodipaasciampublicbs                   | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-dxTSoftwareDigiTech-Ipaas-Prod/weu-prod-ipaas-ciam-rg/weuprodipaasciamsa                         | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-dxTSoftwareDigiTech-RAQN-DCP-Prod/weu-prod-ecommerce-rg-04/euwprodraqndcpbesta                   | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-IBSDigitalWorkplace-Office365-Prod/b2540ddc-5caf-4b79-a27c-a25e07e5137a/assetreviewfun           | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-IBSDigitalWorkplace-Office365-Prod/b2540ddc-5caf-4b79-a27c-a25e07e5137a/collabservicesfun        | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-IBSDigitalWorkplace-Office365-Prod/b2540ddc-5caf-4b79-a27c-a25e07e5137a/m365collaborationstorage | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-IBSDigitalWorkplace-Office365-Prod/b2540ddc-5caf-4b79-a27c-a25e07e5137a/provisioningprodstorage  | Waiver   | -               |
| [Preview]: Storage account public access should be disallowed | hen-IBSDigitalWorkplace-Office365-Prod/b2540ddc-5caf-4b79-a27c-a25e07e5137a/storeppanalytics         | Waiver   | -               |
